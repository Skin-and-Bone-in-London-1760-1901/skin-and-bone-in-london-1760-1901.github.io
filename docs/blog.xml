<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Skin and Bone in London, 1760-1901</title>
<link>https://skin-and-bone-in-london-1760-1901.github.io/blog.html</link>
<atom:link href="https://skin-and-bone-in-london-1760-1901.github.io/blog.xml" rel="self" type="application/rss+xml"/>
<description>A data blog for the Skin and Bone project</description>
<generator>quarto-1.5.53</generator>
<lastBuildDate>Thu, 15 May 2025 23:00:00 GMT</lastBuildDate>
<item>
  <title>Exploring the Skin and Bone hospitals data</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/</link>
  <description><![CDATA[ 




<section id="about-the-data" class="level2">
<h2 class="anchored" data-anchor-id="about-the-data">About the data</h2>
<p>Data originally collected by Madeleine Mant, based on admission and discharge records of four hospitals:</p>
<ul>
<li>St Thomas’ (STH) (1774-1800 with many gaps)</li>
<li>Guy’s (GHS) (1813-38)</li>
<li>Royal London (RLH) (1760, 1791-92, 1805)</li>
<li>Middlesex (MXH) (1760-64, 1771-88)</li>
</ul>
<p>Records vary in detail: the bare minimum is name, date of admission and reason for admission. Injury descriptions are quite brief and lacking in detail (eg, they very rarely record side of body), and only the specific injury that caused admission is likely to be recorded.</p>
<p>RLH has the richest set of data, also having place of abode, occupation, age and result of hospital stay for most individuals, but only covers 3 1/2 years. GHS has age data for about a quarter of the records. Discharge information is available for most RLH records and about a quarter of MXH. STH is quite fragmentary.</p>
<p>More detailed information about the sources can be found in Madeleine Mant’s PhD thesis, <a href="https://macsphere.mcmaster.ca/handle/11375/20026">Slips, Trips, Falls, and Brawls: Fractures of the Working Poor in London During the Long Eighteenth Century</a> (McMaster University, 2016).</p>
</section>
<section id="injuries-and-chronological-patterns" class="level2">
<h2 class="anchored" data-anchor-id="injuries-and-chronological-patterns">Injuries and chronological patterns</h2>
<p>Generally, it seems reasonable to assume that an injury would have occurred shortly before admission, so it’s possible to use this data to explore changes over time or seasonal patterns to injuries.</p>
<p>STH and (at least to some extent) RLH only admitted patients once a week, so it’s not possible to be more precise than that; here I’ll use monthly numbers and focus on years without gaps in the surviving registers.</p>
<p>The <a href="https://epirhandbook.com/en/new_pages/time_series.html">R Epidemiologists Handbook</a> has a helpful introduction to time series analysis with R.</p>
<p>I’m using some features of the <a href="https://tsibble.tidyverts.org/">tsibble</a> package in data processing.</p>
</section>
<section id="chronological-overview" class="level2">
<h2 class="anchored" data-anchor-id="chronological-overview">Chronological overview</h2>
<p>This shows the lack of overlap between most of hospitals’ data, which may make it difficult to talk about long term chronological patterns, as it could be muddied by possible differences between hospitals.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Since STH is very fragmentary and RLH only has three complete years, I’ll remove them from subsequent analysis to focus on the two hospital with good runs of full years, MXH and GHS.</p>
<p>There’s a lot of fluctuation, but MXH has mostly smaller monthly numbers. (Though why does MXH have a sudden large spike in numbers in 1774? That may need checking out. Also interesting that its numbers look higher before than after the gap in records 1765-71.)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Boxplot of monthly admissions per hospital confirms much smaller numbers for MXH.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="injury-categories-over-time" class="level3">
<h3 class="anchored" data-anchor-id="injury-categories-over-time">injury categories over time</h3>
<p>Is there any significant change in the distribution of injuries with which people are admitted over time?</p>
<p>Filtering out a few categories that constitute &lt;1% of the total for each hospital; there are some differences between the two hospitals which I won’t investigate here. Eg, <code>muscle</code> = 6.6% of MXH but &lt;1% of GHS; <code>injury</code> doesn’t appear as a category in MXH but 35% in GHS. The former might be an actual difference in hospital intake; the latter is more likely a difference in recording practices.</p>
<p>The heatmaps are proportional rather than using raw numbers since there’s a lot of variation in category sizes. Even with the filters, some of the annual numbers could be very small. (White blocks in the heatmap = zero.) These are more likely to help with highlighting possible areas of interest for further exploration than to provide definitive findings.</p>
<p>MXH heatmap confirms generally higher numbers 1760-64, before the gap in records, but also highlights certain categories in that period - <code>dislocation</code>, <code>muscle</code> and <code>wound.</code> After the resumption, distribution of injuries seems much more even.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>For GHS the distribution overall looks less variable than in MXH except for a possible surge in the <code>wound</code> category right at the end of the period.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="seasonality-heatmaps" class="level2">
<h2 class="anchored" data-anchor-id="seasonality-heatmaps">Seasonality heatmaps</h2>
<p>NB: This is not taking into account different length of months; 30 vs 31 days doesn’t make any visible difference, but needs to be borne in mind when looking at February.</p>
<p>If I want to combine the data for both hospitals in one chart, it’s better to do proportions than numbers again because of the differences.</p>
<p>The heatmap doesn’t suggest any major changes over time. But it does hint at a concentration of admissions in the middle months of the year, slightly more marked in the earlier MXH years (as well as one noticeable outlier that could would need further examination).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="by-hospital" class="level3">
<h3 class="anchored" data-anchor-id="by-hospital">by hospital</h3>
<p>Comparison of the two hospitals confirms the seasonal pattern is stronger for MXH than GHS, though it’s still present in the latter. In GHS, but not in MXH, December looks slightly more concentrated than the preceding and following months. (February is slightly exaggerated in both due to being a short month and if that’s taken into account it’d be much the same as Jan and March.)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="by-gender" class="level3">
<h3 class="anchored" data-anchor-id="by-gender">by gender</h3>
<p>Comparison of gender highlights that the summer pattern is much stronger for men than women. Why would there be more female injuries in May?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>(there isn’t enough age data to do the same chart for age groups.)</p>
</section>
<section id="by-injury-category" class="level3">
<h3 class="anchored" data-anchor-id="by-injury-category">by injury category</h3>
<p>A look at the four most frequent injury categories overall (excluding non-specific <code>injury</code>).</p>
<p>Sometimes a visualisation tells you something that hadn’t occurred to you but is obvious in retrospect: <code>burn</code>s are most frequent in the late autumn and winter months (but why more so in Nov-Dec than in Jan-Feb?). The other three categories are on the whole following the summer months pattern, though <code>fracture</code> is… interesting.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="by-body-region" class="level3">
<h3 class="anchored" data-anchor-id="by-body-region">by body region</h3>
<p>And finally a breakdown for the four most frequent body regions (excl unknown). Again, tending to point to the summer pattern, but some more strongly so than others.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/hospitals/</guid>
  <pubDate>Thu, 15 May 2025 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Types of injury</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/categories/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The Skin and Bone project data has extracted and separated out two kinds of injury information from the original datasets: types and locations of injuries. However, apart from some minor cleanup, the data consists of the original text of descriptions and there hasn’t been any further classification.</p>
<p>To do meaningful analysis and visualisations, I need to standardise and group that information into broader categories. Here I look at the process for grouping injury descriptions into broader <em>categories</em>.</p>
</section>
<section id="defining-categories" class="level2">
<h2 class="anchored" data-anchor-id="defining-categories">Defining categories</h2>
<p>Especially in DP, descriptions of injuries are very varied; combining the three collections, there are over 350 distinct values in the <code>injury</code> column. How to reduce this kind of variety to a small number of coherent and useful categories for analysis?</p>
<p>After some initial exploration of the injury descriptions and discussion with the project PI and Co-I, we came up with a list of eight categories:</p>
<ul>
<li><strong>fractures</strong> (including fracture, “broken”, compound fracture, <a href="https://en.wikipedia.org/wiki/Avulsion_injury">avulsion</a>)</li>
<li><strong>blunt force trauma</strong> (including lacerations, contusion, bruises, kicks, concussion, falls, being crushed or strangled)</li>
<li><strong>sharp force trauma</strong> (including cuts, scars, stabs, bites, punctures)</li>
<li><strong>wounds</strong> (a variety of surface injuries and marks, including those described only as “wound”, and “marks” that are likely to be the result of industrial injuries and accidents)</li>
<li><strong>burns</strong> and scalds (also includes some brand marks which were inflicted as punishments)</li>
<li><strong>muscle injuries</strong> - sprains, strains, etc</li>
<li><strong>dislocation</strong></li>
<li><strong>amputation</strong></li>
</ul>
<p>These are not all <em>quite</em> the same kind of thing; most have a fairly specific forensic definition, but “wounds” is more general. But they should work as a coherent set for our particular data.</p>
<p>A few more categories were also assigned but are removed from categories-based analysis (the records are kept in the dataset when doing other kinds of analysis):</p>
<ul>
<li><em>injury</em> - description states something like “injury” or “injured” but gives no further information</li>
<li><em>chronic</em> - various physical impairments (eg “bent”, “deformed”, “ruptured”, “lame”) which <em>might</em> have been due to accidents but not enough info to be sure</li>
<li><em>other</em> - some descriptions like “accident” that are most likely relevant injuries but not specific enough to judge what kind</li>
</ul>
<p>A very few records which are almost certainly not relevant to the project (such as frostbite), probably not injuries or too fragmentary to interpret, are removed from the data before any analysis. (The “chronic” category is large enough that retaining it may be a bit problematic, but will keep it at least for now.)</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## shared packages etc ####</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R/shared.R"</span>)) </span>
<span id="cb1-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## aesthetics ####</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R/trimmings.R"</span>))</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># any extra packages and functions should go here</span></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(reactable)</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## dp data ####</span></span>
<span id="cb1-10">dp_injuries_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/dp_injury.xlsx"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guess_max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100000</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># need locations for dp to fix lost-tbd</span></span>
<span id="cb1-15">dp_injury_category <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-16">  dp_injuries_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, injury, full_description, body_location) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(body_location)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_trim</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(body_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s+"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_region =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, arm_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arm"</span>,</span>
<span id="cb1-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, hand_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hand"</span>,</span>
<span id="cb1-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, foot_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foot"</span>,</span>
<span id="cb1-24">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, leg_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"leg"</span>,</span>
<span id="cb1-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, head_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"head"</span>,</span>
<span id="cb1-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, torso_rgx) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb1-27">    body_location <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"side"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb1-28">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-29">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># injury categories *after* region</span></span>
<span id="cb1-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(injury)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_trim</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(injury, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"  +"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-32">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plural might be meaningful...</span></span>
<span id="cb1-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_plural =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(marks)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b|s$"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span></span>
<span id="cb1-35">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-36">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># then slight std to make rgx easier. don't need to keep original.</span></span>
<span id="cb1-37">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(injury, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"s$|^marks of *"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">injury_classify</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-39">  <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## tweak for injury category "lost-tbd". needs injury region</span></span>
<span id="cb1-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-41">    injury_region <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foot"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hand"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"leg"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arm"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> injury_category<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lost-tbd"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"amputation"</span>,</span>
<span id="cb1-42">    injury<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lost sight"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chronic"</span>,</span>
<span id="cb1-43">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(injury_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> injury_category<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lost-tbd"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>,</span>
<span id="cb1-44">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"teeth|tooth"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>,</span>
<span id="cb1-45">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># varied, includes eyes, ears, genitalia and less plausible locations but v few</span></span>
<span id="cb1-46">    injury_category<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lost-tbd"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"other"</span>, </span>
<span id="cb1-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default =</span> injury_category</span>
<span id="cb1-48">  )) </span>
<span id="cb1-49"></span>
<span id="cb1-50"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## skeletons ####</span></span>
<span id="cb1-51">os_injury_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-52">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/os_injury.xlsx"</span>) ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-53">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-54"></span>
<span id="cb1-55">os_injury_category <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-56">  os_injury_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-57">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span>(injury, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">into=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"injury"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"i2"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" *</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">| *"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extra =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"merge"</span>)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-58">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tidy up</span></span>
<span id="cb1-59">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(injury, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">..+$"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb1-60">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_trim</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(injury_category))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-61">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-62">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"subluxation"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dislocation"</span>,</span>
<span id="cb1-63">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fracture|avulsion"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fracture"</span>,</span>
<span id="cb1-64">    injury_category<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"soft tissue trauma"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"muscle"</span>,</span>
<span id="cb1-65">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"projectile"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wound"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># only one.</span></span>
<span id="cb1-66">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"trauma"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">word</span>(injury_category),</span>
<span id="cb1-67">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default =</span> injury_category</span>
<span id="cb1-68">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-69">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, injury, injury_category)</span>
<span id="cb1-70"></span>
<span id="cb1-71"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## hospitals ####</span></span>
<span id="cb1-72">hp_injury_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-73">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/hp_injury.xlsx"</span>) , <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guess_max=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18000</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-74">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># basic year fixes</span></span>
<span id="cb1-75">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">description_year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-76">    description_year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_number</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(description_year), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb1-77">    description_year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1760</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, </span>
<span id="cb1-78">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default=</span>description_year</span>
<span id="cb1-79">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-80">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-81"></span>
<span id="cb1-82">hp_injury_category <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-83">  hp_injury_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-84">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, injury, full_description) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-85">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">injury_classify</span>()</span>
<span id="cb1-86">  </span>
<span id="cb1-87"></span>
<span id="cb1-88">injuries_count <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-89"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_rows</span>(dp_injury_category, hp_injury_category, os_injury_category) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-90">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_trim</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(injury))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-91">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(injury, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-92">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(injury)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-93">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rank=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min_rank</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(count))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-94">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(rank)</span></code></pre></div>
</details>
</div>
<p><em>Explore injuries…</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-2e1f9a415d09812ac44a" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2e1f9a415d09812ac44a">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"rank":[130,146,98,130,107,92,58,85,71,47,68,99,36,81,78,85,54,146,44,33,73,7,10,146,31,92,12,21,23,19,13,61,11,92,15,130,34,57,62,107,104,29,114,146,40,146,27,71,146,6,16,130,146,46,24,4,66,56,99,130,54,85,146,9,74,22,74,81,146,114,146,146,79,146,146,107,89,39,17,146,2,114,146,89,51,114,107,65,104,92,146,107,43,62,52,25,3,59,146,146,125,146,74,146,35,74,79,146,146,20,107,62,32,125,114,146,5,37,50,125,81,59,130,130,146,146,146,146,130,146,99,146,146,104,130,114,146,66,70,8,14,114,85,49,146,1,125,146,146,42,146,125,130,146,146,146,28,99,107,69,130,114,146,130,146,81,53,146,130,146,146,38,48,45,146,40,89,30,92,114,146,114,99,130,92,146,146,130,130,26,146,18,114],"injury":["1 scar","2 blue mark","2 scar","3 blue dot","3 scar","accident","amputated","amputation","avulsion","been broken","been fractured","been injured","bent","bent to left","bent to right","bit","bite","bitted","bitten","blind","blue cut","blue dot","blue mark","blue mark and scar","blue scar","blunt force trauma","broken","bruise","bruised","bruises","burn","burn mark","burn scar","burned","burns","burnt","cast","coal mark","coal scar","compound","compound fracture","compound fractured","compression","concusison","concussion","concussions","contracted","contused","contused wound","contusion","contusions","contuson","corporal punishment","crippled","crooked","cut","cut mark","d left side","d on left side","defect","defective","deficient","deficient of","deformed","disfigured","dislocated","dislocation","dislocation. subluxation","dislocation. subluxation (secondary)","displaced","drowned","e mole on","ear slit","eight false teeth","false","flesh mark","flogging","flogging mark","fracture","fracture. hairline","fractured","fractures","fractures & dislocations","frost bite","gun shot wound","gunshot","gunshot wound","has been broken","has been fractured","has been injured","hoken","hurt","hurt by a fall","inclined to left","inclined to right","injured","injury","injury internal","injury inward","internal bruise","internal injury","inury","inward bruise","inward complaint","jammed","kick","kicked","killed by a fall","laceratd","lacerated","lacerated wound","laceration","lame","large cut","large scar","limp","lost","lost part","lost part of","lost sight","lump","luxated","mark from","missing","mole on ri","mortar in","nail in","nail through","needle in her","numerous small scar","one scar","out","projectile trauma","puncture","puncture wound","punctured","purple mark","red mark","run over","ruptured","scald","scald mark","scald scar from","scalded","scalds","scar","scar (abscess)","scar absces","scar form cut","scar from","scar from a burn","scar from a cut","scar from burn","scar from cut","scar from dog bite","scar or mark","scarred","several scar","sharp force trauma","shot","shot in","slight scar","slightly crooked","slit","small cut","small scar","soft tissue trauma","spain","spained","speck","splintered","split","sprain","sprained","sprains","stab","stabbed","strain","strained","strangled","struck by lightening","suffocated","suffocation","swallowed a pin","torn","two deep cut","two scars from a burn","very much deformed","very much marked from a burn","wound","wound cut","wounded","wounds"],"count":[2,1,8,2,5,9,40,11,20,72,27,7,118,12,17,11,54,1,87,167,19,954,784,1,177,9,667,409,361,438,647,35,668,9,558,2,161,46,34,5,6,283,4,1,92,1,299,20,1,1074,540,2,1,76,355,3213,28,50,7,2,54,11,1,817,18,381,18,12,1,4,1,1,13,1,1,5,10,95,500,1,6693,4,1,10,60,4,5,33,6,9,1,5,88,34,57,321,3273,36,1,1,3,1,18,1,120,18,13,1,1,423,5,34,168,3,4,1,1708,112,61,3,12,36,2,2,1,1,1,1,2,1,7,1,1,6,2,4,1,28,23,861,606,4,11,66,1,56269,3,1,1,90,1,3,2,1,1,1,297,7,5,26,2,4,1,2,1,12,56,1,2,1,1,99,69,79,1,92,10,269,9,4,1,4,7,2,9,1,1,2,2,319,1,449,4]},"columns":[{"id":"rank","name":"rank","type":"numeric","maxWidth":80},{"id":"injury","name":"injury","type":"character","maxWidth":140},{"id":"count","name":"count","type":"numeric","maxWidth":70}],"filterable":true,"defaultSorted":[{"id":"rank","desc":false},{"id":"injury","desc":false}],"defaultPageSize":10,"defaultExpanded":true,"highlight":true,"bordered":true,"dataKey":"d23258b4cc5ab85e7b996bd285df41f5"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="assigning-categories-to-the-data" class="level2">
<h2 class="anchored" data-anchor-id="assigning-categories-to-the-data">Assigning categories to the data</h2>
<p>A rules-based method using <a href="https://programminghistorian.org/en/lessons/understanding-regular-expressions">regular expressions</a> is used to decide which category an injury description should be put in. The regex for the fractures category, for example, is: “fractur|broken|compound|avulsion|hairline|splintered)”</p>
<p>The process is not perfect, and some assignments can be more uncertain than others. “Scar”, for example, which is very common in DP descriptions, has been categorised as sharp force trauma as generally most likely, but scars can also be the result of burns. (If a description explicitly says that a scar was caused by burns, it’s put in the latter category instead.)</p>
<p>DP also has a number of “lost X” (or “missing X”) and the most likely interpretation of these depends on the injury’s location. So, for example:</p>
<ul>
<li>“lost teeth/tooth” <em>could</em> be the result of an accident but seem far more likely to be related to poor dental health in this period and will be removed</li>
<li>a “lost” limb <em>might</em> not always be due to an accident, but on balance of probabilities will put in the “amputation” category</li>
</ul>
<p>This is the function I eventually concocted to handle DP and HP (the regexes make it look complicated but the function itself is quite simple). The OS descriptions are much more consistent so they’re easier to handle.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">injury_classify <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(df){</span>
<span id="cb2-2"></span>
<span id="cb2-3">  df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(injury)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">injury_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb2-6">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># environmental; to be removed</span></span>
<span id="cb2-7">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(struck by lightening|flash of lightning|frost.?bite|frost.?bitten)</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, </span>
<span id="cb2-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(fractur|broken|compound|avulsion|hairline|splintered)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fracture"</span>,</span>
<span id="cb2-9">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(burn|scald|mortar in|d (on )?left )"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"burn"</span>,</span>
<span id="cb2-10">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(sharp|cut|scar|stab|bit|needle|pin|punctur|nail (in|through))|slit"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sharp"</span>,</span>
<span id="cb2-11">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(sprain|strain|soft tissue|muscle|spain)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"muscle"</span>,</span>
<span id="cb2-12">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(amputat)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"amputation"</span>,</span>
<span id="cb2-13">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># DP only. some are amputation, but final choice will depend on location</span></span>
<span id="cb2-14">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(lost|missing)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lost-tbd"</span>,</span>
<span id="cb2-15">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(blunt|lacerat|contus|bruis|kick|concus|jam|compres|strang|r.n over|fall|lump|swelling|knocked up|ruptured|split|torn|flogg|corporal|internal|inward)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blunt"</span>, </span>
<span id="cb2-16">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(dislocat|sublux|luxat|displaced)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dislocation"</span>,</span>
<span id="cb2-17">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(bent|crooked|inclined|contracted|crippled|defect|deficient|deformed|disfigured|lame|limp|blind|cast)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chronic"</span>,</span>
<span id="cb2-18">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(gun|shot|gun.shot|wound)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wound"</span>,</span>
<span id="cb2-19">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(been injured|injured|injury|inury)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"injury"</span>,</span>
<span id="cb2-20">      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a bit more uncertain. probably industrial but some might be tattoos </span></span>
<span id="cb2-21">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(blue|red|purple|coal)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wound"</span>, </span>
<span id="cb2-22">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_category, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b(accident|suffocated|suffocation|drowned|hurt leg)|^hurt"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"other"</span>,</span>
<span id="cb2-23">    ))</span>
<span id="cb2-24">}</span></code></pre></div>
</div>
<p>A random sample:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">injuries_count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_sample</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(injury) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(injury) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">injury_classify</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">injury</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">injury_category</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">bruised</td>
<td style="text-align: left;">blunt</td>
</tr>
<tr class="even">
<td style="text-align: left;">crooked</td>
<td style="text-align: left;">chronic</td>
</tr>
<tr class="odd">
<td style="text-align: left;">injury internal</td>
<td style="text-align: left;">blunt</td>
</tr>
<tr class="even">
<td style="text-align: left;">injury inward</td>
<td style="text-align: left;">blunt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lame</td>
<td style="text-align: left;">chronic</td>
</tr>
<tr class="even">
<td style="text-align: left;">lump</td>
<td style="text-align: left;">blunt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nail through</td>
<td style="text-align: left;">sharp</td>
</tr>
<tr class="even">
<td style="text-align: left;">scalds</td>
<td style="text-align: left;">burn</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scar from cut</td>
<td style="text-align: left;">sharp</td>
</tr>
<tr class="even">
<td style="text-align: left;">wound</td>
<td style="text-align: left;">wound</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>As already seen with injury location regions, the distribution of injury categories varies a lot between the collections. DP is dominated by sharp force injuries; many of these are scars, which reflects the nature of the DP records as recording long personal histories of physical misfortune and violence. OS is equally dominated by fractures, the injuries most likely to remain visible on skeletal evidence. HP, on the other hand, shows a more varied record of mishaps and accidents, though fractures are still the largest single category.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/categories/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/categories/</guid>
  <pubDate>Tue, 06 May 2025 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Injury locations on the body</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/locations/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The Skin and Bone project data has extracted and separated out two kinds of injury information from the original datasets: types and locations of injuries. However, apart from some minor cleanup, the data consists of the original text of descriptions and there hasn’t been any further classification.</p>
<p>To do meaningful analysis and visualisations, I need to standardise and group that information into broader categories. Here I look at the process for grouping body locations into <em>regions</em>, for which I’ll make a <a href="https://en.wiktionary.org/wiki/lookup_table">lookup</a> file to reuse in subsequent analysis.</p>
<p>A separate post looks at the categorisation of injuries.</p>
</section>
<section id="the-regions" class="level2">
<h2 class="anchored" data-anchor-id="the-regions">The regions</h2>
<p>The injury regions are based on six anatomical groupings used by Madeleine Mant, who originally created the HP and OS data [at p.66 of <a href="http://hdl.handle.net/11375/20026">her thesis</a>].</p>
<ul>
<li><strong>head</strong>: included fractures to the cranium and facial skeleton.</li>
<li><strong>torso</strong>: included fractures to the sternum, ribs, vertebrae, sacrum, and os coxae.</li>
<li><strong>arm</strong>: included the shoulder girdle (scapula, clavicle) and long bones of the arm (humerus, radius, ulna).</li>
<li><strong>leg</strong>: included the femur, tibia, fibula, and patella.</li>
<li><strong>hand</strong>: included the carpals, metacarpals, and manual phalanges</li>
<li><strong>foot</strong>: included the tarsals, metatarsals, and pedal phalanges.</li>
</ul>
</section>
<section id="a-starting-point" class="level2">
<h2 class="anchored" data-anchor-id="a-starting-point">A starting point</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## get data etc</span></span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## shared packages etc ####</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R/shared.R"</span>)) </span>
<span id="cb1-5"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## aesthetics ####</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">source</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R/trimmings.R"</span>))</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># any extra packages and functions should go here</span></span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(reactable)</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## dp data ####</span></span>
<span id="cb1-12">dp_injuries_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/dp_injury.xlsx"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guess_max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100000</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-15"></span>
<span id="cb1-16">dp_injury_locations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-17">  dp_injuries_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, body_location, injury, full_description)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## skeletons ####</span></span>
<span id="cb1-21">os_injury_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/os_injury.xlsx"</span>) ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-24"></span>
<span id="cb1-25">os_injury_locations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-26">  os_injury_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, body_location, injury)</span>
<span id="cb1-28"></span>
<span id="cb1-29"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## hospitals ####</span></span>
<span id="cb1-30">hp_injury_xlsx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/v20231130/hp_injury.xlsx"</span>) , <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">guess_max=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18000</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-32">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># basic year fixes</span></span>
<span id="cb1-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">description_year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb1-34">    description_year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_number</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(description_year), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb1-35">    description_year<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1760</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, </span>
<span id="cb1-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default=</span>description_year</span>
<span id="cb1-37">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>()</span>
<span id="cb1-39"></span>
<span id="cb1-40">hp_injury_locations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-41">  hp_injury_xlsx <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(rowid, body_location, injury, full_description) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-43">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(body_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">bright +"</span>))</span></code></pre></div>
</details>
</div>
<p>The hospitals (HP) descriptions data is the most useful set for making an initial lookup file, as the descriptions are brief and consistent - they almost never include extra detail like side of body - so that in virtually all cases, the <code>body_location</code> column <em>only</em> consists of the name of a body part. The Digital Panopticon criminals (DP) and osteological (OS) datasets are both a bit more complicated.</p>
<p>NB that a significant proportion of descriptions don’t mention an injury location at all, so I’ll need an “unknown” category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">hp_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(body_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">rowid</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">body_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">injury</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">full_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">arm</td>
<td style="text-align: left;">fractured</td>
<td style="text-align: left;">fractured arm.</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">loins</td>
<td style="text-align: left;">injury</td>
<td style="text-align: left;">injury loins.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">arm</td>
<td style="text-align: left;">fractured</td>
<td style="text-align: left;">fractured arm.</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">eye</td>
<td style="text-align: left;">injury</td>
<td style="text-align: left;">injury eye.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">rib</td>
<td style="text-align: left;">fractured</td>
<td style="text-align: left;">fractured rib.</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">hurt by a fall</td>
<td style="text-align: left;">hurt by a fall.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">leg</td>
<td style="text-align: left;">injury</td>
<td style="text-align: left;">injury leg.</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">leg</td>
<td style="text-align: left;">lacerated</td>
<td style="text-align: left;">lacerated leg.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">burns</td>
<td style="text-align: left;">burns.</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">head</td>
<td style="text-align: left;">cut</td>
<td style="text-align: left;">cut head.</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>First, a list of unique values in the <code>body_location</code> column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">hp_injury_location_count <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb3-2">hp_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(body_location, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rank=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min_rank</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(count))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(rank)</span></code></pre></div>
</div>
<p>There are 104 distinct values in <code>body_location</code> (about a quarter of which join the regions_locations list without any further work).</p>
<p><em>Explore locations…</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-53338c027588e2d29ee9" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-53338c027588e2d29ee9">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"rank":[29,9,71,3,54,84,12,52,65,65,38,84,55,84,37,71,13,84,84,78,84,71,23,21,60,18,47,30,43,19,36,8,55,52,10,78,4,55,14,34,84,65,84,25,6,71,1,27,49,84,33,84,84,78,84,41,44,84,71,17,63,60,58,71,65,60,45,78,24,7,71,21,40,45,65,11,16,84,15,28,58,84,63,65,84,84,32,39,5,49,20,31,41,34,48,78,51,84,84,84,78,26,84,2],"body_location":["abdomen","ankle","ankles","arm","arms","axilla","back","belly","bladder","body","breast","calcaneus","cheek","cheekbone","chest","chin","clavicle","clavicles","condule","condyle","cranium","ear","elbow","eye","eyes","face","feet","femur","fibula","finger","fingers","foot","forehead","groin","hand","hands","head","heel","hip","humerus","iliium","ilium","internal","jaw","knee","knees","leg","legs","lip","liver","loins","lumbar region","maxilla","metacarpal","mouth","neck","nose","occiput","olecranon","patella","pelvis","penis","perineum","private parts","privates","pubis","radius","rectum","rib","ribs","sacrum","scalp","scapula","scrotum","shin","shoulder","side","sides","skull","spine","sternum","stomach","stump","temple","temporal","testes","testicle","testicles","thigh","thighs","throat","thumb","tibia","toe","toes","tongue","ulna","urethra","uterus","vagina","womb","wrist","wrists",null],"count":[77,558,3,1671,10,1,332,11,4,4,38,1,9,1,40,3,312,1,1,2,1,3,126,142,6,155,18,70,23,153,48,592,9,11,491,2,1326,9,301,52,1,4,1,105,662,3,3480,99,14,1,53,1,1,2,1,28,20,1,3,175,5,6,8,3,4,6,19,2,120,602,3,142,29,19,4,342,231,1,286,98,8,1,5,4,1,1,61,31,1226,14,144,69,28,52,16,2,12,1,1,1,2,102,1,2874]},"columns":[{"id":"rank","name":"rank","type":"numeric","maxWidth":80},{"id":"body_location","name":"location","type":"character","maxWidth":140},{"id":"count","name":"count","type":"numeric","maxWidth":70}],"filterable":true,"defaultSorted":[{"id":"rank","desc":false},{"id":"body_location","desc":false}],"defaultPageSize":10,"defaultExpanded":true,"highlight":true,"bordered":true,"dataKey":"8f9eb0b491a4ea5df5127c0800d54a4b"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>While most are easy to place, they’re an interesting mix of familiar, old-fashioned and technical that I needed to look up. (<a href="https://en.wikipedia.org/wiki/Ilium_(bone)">ilium</a>? <a href="https://en.wikipedia.org/wiki/Olecranon">olecranon</a>? <a href="https://en.wikipedia.org/wiki/Axilla">axilla</a> and <a href="https://en.wikipedia.org/wiki/Maxilla">maxilla</a>?)</p>
<p>A handful can’t be placed: “stump” seems quite likely to be leg, but I don’t think that can be assumed; <a href="https://en.wikipedia.org/wiki/Condyle">condyle</a> apparently could be one of several.</p>
<p>I saved the list to a plain text file, and added a few locations that are in my list above but not used in these records. Since it’s a small number, manually grouped them per region, using a simple temporary format where the group name is listed first, prefixed with a hash. This can be converted to a two column lookup list quite easily.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">hp_locations_by_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_lines</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations.txt"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">enframe</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"injury_location"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">region =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_match</span>(injury_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#(.+)$"</span>)[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fill</span>(region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(injury_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(region)</span></code></pre></div>
</div>
<p>To reuse the lookup later will simply need a left_join.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">hp_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(body_location, full_description) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(hp_locations_by_region, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body_location"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"injury_location"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">region=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">region</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">body_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">full_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">arm</td>
<td style="text-align: left;">arm</td>
<td style="text-align: left;">fractured arm.</td>
</tr>
<tr class="even">
<td style="text-align: left;">torso</td>
<td style="text-align: left;">loins</td>
<td style="text-align: left;">injury loins.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">head</td>
<td style="text-align: left;">eye</td>
<td style="text-align: left;">injury eye.</td>
</tr>
<tr class="even">
<td style="text-align: left;">torso</td>
<td style="text-align: left;">rib</td>
<td style="text-align: left;">fractured rib.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unknown</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">hurt by a fall.</td>
</tr>
<tr class="even">
<td style="text-align: left;">leg</td>
<td style="text-align: left;">leg</td>
<td style="text-align: left;">injury leg.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">leg</td>
<td style="text-align: left;">leg</td>
<td style="text-align: left;">lacerated leg.</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">burns.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">head</td>
<td style="text-align: left;">head</td>
<td style="text-align: left;">cut head.</td>
</tr>
<tr class="even">
<td style="text-align: left;">head</td>
<td style="text-align: left;">head</td>
<td style="text-align: left;">injury head.</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="extending-to-os-and-dp" class="level2">
<h2 class="anchored" data-anchor-id="extending-to-os-and-dp">Extending to OS and DP</h2>
<p>The OS and DP location descriptions often contain more detail than those for HP, so I’ll use a regex strategy rather than simple joins for the lookups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">locations_by_region_rgx <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb6-2">hp_locations_by_region <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># drop body/side as they cause a few false positives </span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>injury_location <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"side"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locations_rgx =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glue_collapse</span>(injury_location, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"|"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locations_rgx=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">b({locations_rgx})"</span>)) </span>
<span id="cb6-9"></span>
<span id="cb6-10">arm_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb6-11"></span>
<span id="cb6-12">foot_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb6-13"></span>
<span id="cb6-14">hand_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb6-15"></span>
<span id="cb6-16">head_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb6-17"></span>
<span id="cb6-18">leg_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb6-19"></span>
<span id="cb6-20">torso_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pluck</span>(locations_by_region_rgx, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"locations_rgx"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span></code></pre></div>
</div>
<p><em>Example</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">leg_region</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>\b(femur|fibula|knee|knees|leg|legs|patella|shin|thigh|thighs|tibia)</code></pre>
</div>
</div>
<p>The OS descriptions look rather different from both HP and DP. Both HP and DP are based on transcriptions of documents written by people working in historical institutions (the hospital records were written by medical professionals; I’m not quite so sure about all the officials who recorded the DP descriptions). In contrast, the OS data has been recorded by a modern researcher using a systematic methodology for identifying and describing fractures [<a href="http://hdl.handle.net/11375/20026">Mant, p.60</a>].</p>
<p>Most of the locations have been recorded twice, once using mostly non-technical language (“left forearm”) and then using more specific anatomical terms (“radius”). This gives me two chances to match a location to a region! (In the data they’re recorded in the same column using a pipe separator; I did need to separate them out and handle separately to avoid some false positives.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">os_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>injury, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>rowid) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span>(body_location, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">into=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"location1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"location2"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" *</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">| *"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extra =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drop"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">location2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">replace_na</span>(location2, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">location1</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">location2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">vertebral</td>
<td style="text-align: left;">cervical vertebra 7</td>
</tr>
<tr class="even">
<td style="text-align: left;">vertebral</td>
<td style="text-align: left;">thoracic vertebra 6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">left forearm</td>
<td style="text-align: left;">radius</td>
</tr>
<tr class="even">
<td style="text-align: left;">right forearm</td>
<td style="text-align: left;">ulna</td>
</tr>
<tr class="odd">
<td style="text-align: left;">right lower leg</td>
<td style="text-align: left;">fibula</td>
</tr>
<tr class="even">
<td style="text-align: left;">rib</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">left forearm</td>
<td style="text-align: left;">radius</td>
</tr>
<tr class="even">
<td style="text-align: left;">left forearm</td>
<td style="text-align: left;">ulna</td>
</tr>
<tr class="odd">
<td style="text-align: left;">right foot</td>
<td style="text-align: left;">navicular</td>
</tr>
<tr class="even">
<td style="text-align: left;">rib</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>


</div>
</div>
<p>All the records could be matched without needing to add any new terms to the lookup list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">os_locations_by_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb10-2">os_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span>(body_location, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">into =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"location1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"location2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"extra"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" *</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">| *"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extra =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"merge"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">location_region =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb10-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, arm_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arm"</span>,</span>
<span id="cb10-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, hand_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hand"</span>,</span>
<span id="cb10-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, foot_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foot"</span>,</span>
<span id="cb10-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, leg_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"leg"</span>,</span>
<span id="cb10-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, head_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"head"</span>,</span>
<span id="cb10-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location1, torso_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb10-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a few don't match on location1 column but do match on location2.</span></span>
<span id="cb10-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, arm_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arm"</span>,</span>
<span id="cb10-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, head_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"head"</span>,</span>
<span id="cb10-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, leg_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"leg"</span>,</span>
<span id="cb10-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, torso_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb10-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, foot_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foot"</span>,</span>
<span id="cb10-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(location2, hand_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hand"</span></span>
<span id="cb10-18">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(location_region, location1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>)</span></code></pre></div>
</div>
<p>DP locations need a bit more work. The <code>body_location</code> data is quite a bit messier than HP or OS, reflecting that the descriptions are more complex: injuries are more diverse than in the other two collections, and recording injuries wasn’t the records’ primary purpose so they can contain various kinds of information.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">dp_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(full_description) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   full_description                                                             
   &lt;chr&gt;                                                                        
 1 Scar over right eye, mole on left shoulder.                                  
 2 Scar right eye brow, mole on left shoulder, vaccination mark on left arm.    
 3 Scar on forehead, left eyebrow &amp; wrist, lost front upper tooth.              
 4 Scar on forehead, 2 scar on right arm below the elbow and lost several teeth.
 5 Scar on forehead and left of nose                                            
 6 Scars on forehead and nose, ears pierced                                     
 7 Scars on right knee, Ears pierced                                            
 8 Scar on right knee                                                           
 9 Scar on right hand and on forehead, mole on nose.                            
10 Small Mole on left cheek, scar over left eyebrow, ears pierced               </code></pre>
</div>
</div>
<p>Most can be matched to the list; the exceptions needing some new additions to the list are variations in terminology (“forearm” or “collarbone”) or likely to be related to minor injuries that wouldn’t appear in hospital or skeleton records (“tooth/teeth”, “hair”).</p>
<p>However, there are also more locations that can’t be placed, in particular “nail”, “bone” and “fore”, which are very likely to be due to extraction failures. With this much bigger and messier collection, I just have to accept imperfection.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">dp_locations_by_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb13-2">dp_injury_locations <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initial tidying up</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(body_location)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">body_location=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_trim</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(body_location, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s+"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">location_region =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb13-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, arm_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"arm"</span>,</span>
<span id="cb13-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, hand_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hand"</span>,</span>
<span id="cb13-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, foot_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foot"</span>,</span>
<span id="cb13-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, leg_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"leg"</span>,</span>
<span id="cb13-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, head_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"head"</span>,</span>
<span id="cb13-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_detect</span>(body_location, torso_region) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb13-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># put "side" and "body" in torso after more specific descriptions are accounted for</span></span>
<span id="cb13-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (some will be wrong...)</span></span>
<span id="cb13-15">    body_location <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"side"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"body"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torso"</span>,</span>
<span id="cb13-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># differentiate empty locations from those that fail to match the list</span></span>
<span id="cb13-17">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(body_location) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span></span>
<span id="cb13-18">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(location_region, body_location, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rank=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min_rank</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(count))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb13-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(rank)</span></code></pre></div>
</div>
<p><em>Explore locations that failed to match…</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-9ed55605aeab144a9dca" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9ed55605aeab144a9dca">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"rank":[211,211,211,211,211,211,89,211,55,108,49,96,122,171,92,25,43,179,211,211,127,211,211,115,66,211,11,179,127,37,211,93,211,72,119,211,211,211,100,165,211,211,179,64,211,16,211,211,125,36,156,171,32,211,85,179,211,211,211,211,211,84,159],"body_location":["1 top tooth","3 teeth","4 top teeth","above left nipple","above right brest","all her teeth","bone","both less","buttock","buttocks","calf","collar bone","collarbone","each forearm","fore","forearm","forefinger","four top teeth","front teeth","front upper tooth","hair","in palm","inside left upperarm","knuckle","left buttock","left check","left forearm","left forefinger","left nostril","left side","left upper forearm","loin","lower part of left forearm","nail","navel","nearby all her teeth","nearly all front teeth","nearly all teeth","nipple","on palm","one tooth","one top tooth","right brest","right buttock","right check","right forearm","right forefinger","right knuckle","right nostril","right side","several teeth","several top teeth","teeth","third left to","tooth","top front teeth","top teeth","two bottom front teeth","two top teeth","under loft eve","upper teeth","upperarm","vein"],"count":[1,1,1,1,1,1,121,1,358,64,435,81,30,3,86,782,530,2,1,1,23,1,1,46,230,1,1505,2,23,606,1,83,1,206,31,1,1,1,73,5,1,1,2,252,1,1220,1,1,29,634,8,3,676,1,146,2,1,1,1,1,1,157,6]},"columns":[{"id":"rank","name":"rank","type":"numeric","maxWidth":80},{"id":"body_location","name":"location","type":"character","maxWidth":140},{"id":"count","name":"count","type":"numeric","maxWidth":70}],"filterable":true,"defaultSorted":[{"id":"rank","desc":false},{"id":"body_location","desc":false}],"defaultPageSize":10,"defaultExpanded":true,"highlight":true,"bordered":true,"dataKey":"8af183ae7c82a0a48fc7086011752097"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Those that can be placed go into a supplementary text file, organised and added to the original. Then the full list can be saved to a final location as a CSV file for later reuse.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>A quick peek at the results, comparing the three collections.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/locations/index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are some very marked differences between the collections.</p>
<ul>
<li><p>DP has a much higher percentage of head injuries; closer inspection shows a lot of these are relatively superficial injuries that wouldn’t appear in the other two collections, like facial scars or missing teeth (the latter might often be more to do with poor dental health than injuries).</p></li>
<li><p>The largest category in the hospitals data is leg injuries (mostly fractures).</p></li>
<li><p>Skeletons show a lot more torso injuries, most of which are rib fractures.</p></li>
</ul>


</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/locations/</guid>
  <pubDate>Sun, 27 Apr 2025 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Biographical information</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/biographical/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The Skin and Bone project data contains two kinds of biographical information, sex/gender and age, that are consistent enough across collections to be useful for comparison. However, they need some standardisation to enable meaningful analysis and visualisations. There are some variations in recording of the gender data, and ages need to be grouped.</p>
</section>
<section id="age-groups" class="level2">
<h2 class="anchored" data-anchor-id="age-groups">Age groups</h2>
<p>This was effectively pre-determined by broad age categories used in the osteological (OS) collection, where ages are unrecorded and have to be estimated from analysis of the skeletons (<a href="http://hdl.handle.net/11375/20026">Mant thesis p.58</a>).</p>
<ul>
<li>Young Adult (YA) = 18-25 years<br>
</li>
<li>Middle Adult 1 (MA1) = 26-35 years</li>
<li>Middle Adult 2 (MA2) = 36-45 years</li>
<li>Old Adult (OA) = 46+ years</li>
<li>Adult = &gt;18 years</li>
</ul>
<p>A group for children (0-17) was added for the hospital (HP) and Digital Panopticon criminals (DP) collections, as children were excluded from the osteological data, and the “Adult” category was turned into “Unknown” (since it can’t be assumed in HP and DP that someone without a recorded age is an adult).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">os_injury_ages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-2">  os_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(age_group<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adult"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>, age_group))</span>
<span id="cb1-4"></span>
<span id="cb1-5">os_injury_ages <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span>  </span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, age_group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(age_group, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">18-25</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">26-35</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">36-45</td>
<td style="text-align: right;">93</td>
</tr>
<tr class="even">
<td style="text-align: left;">46+</td>
<td style="text-align: right;">122</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">60</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="hp" class="level3">
<h3 class="anchored" data-anchor-id="hp">HP</h3>
<p>Assigning groups to ages is straightforward using <code>case_when()</code>, as the age column is already numerical.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">hp_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(age) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># make age groups; "unknown" for NA.</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb2-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(age) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>,</span>
<span id="cb2-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0-17"</span>,</span>
<span id="cb2-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"18-25"</span>,</span>
<span id="cb2-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"26-35"</span>,</span>
<span id="cb2-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"36-45"</span>,</span>
<span id="cb2-10">    age<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"46+"</span></span>
<span id="cb2-11">  )) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">age_group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">unknown</td>
</tr>
<tr class="even">
<td style="text-align: right;">41</td>
<td style="text-align: left;">36-45</td>
</tr>
<tr class="odd">
<td style="text-align: right;">58</td>
<td style="text-align: left;">46+</td>
</tr>
<tr class="even">
<td style="text-align: right;">25</td>
<td style="text-align: left;">18-25</td>
</tr>
<tr class="odd">
<td style="text-align: right;">45</td>
<td style="text-align: left;">36-45</td>
</tr>
<tr class="even">
<td style="text-align: right;">35</td>
<td style="text-align: left;">26-35</td>
</tr>
<tr class="odd">
<td style="text-align: right;">36</td>
<td style="text-align: left;">36-45</td>
</tr>
<tr class="even">
<td style="text-align: right;">64</td>
<td style="text-align: left;">46+</td>
</tr>
<tr class="odd">
<td style="text-align: right;">38</td>
<td style="text-align: left;">36-45</td>
</tr>
<tr class="even">
<td style="text-align: right;">47</td>
<td style="text-align: left;">46+</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I may as well turn it into a function I can reuse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">make_age_groups <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(df){</span>
<span id="cb3-2">  df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb3-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(age) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>,</span>
<span id="cb3-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0-17"</span>,</span>
<span id="cb3-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"18-25"</span>,</span>
<span id="cb3-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"26-35"</span>,</span>
<span id="cb3-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">between</span>(age, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"36-45"</span>,</span>
<span id="cb3-9">    age<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"46+"</span></span>
<span id="cb3-10">  ))</span>
<span id="cb3-11">}</span></code></pre></div>
</div>
<p>Unfortunately age is not consistently recorded across HP (only one hospital has it for most records).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">hp_injury_ages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb4-2">hp_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_age_groups</span>()</span>
<span id="cb4-4"></span>
<span id="cb4-5">hp_injury_ages <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, age, age_group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(age_group, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0-17</td>
<td style="text-align: right;">182</td>
</tr>
<tr class="even">
<td style="text-align: left;">18-25</td>
<td style="text-align: right;">598</td>
</tr>
<tr class="odd">
<td style="text-align: left;">26-35</td>
<td style="text-align: right;">789</td>
</tr>
<tr class="even">
<td style="text-align: left;">36-45</td>
<td style="text-align: right;">768</td>
</tr>
<tr class="odd">
<td style="text-align: left;">46+</td>
<td style="text-align: right;">931</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">14427</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="dp" class="level3">
<h3 class="anchored" data-anchor-id="dp">DP</h3>
<p>A high proportion of DP records have age information, but it needs a little bit of preprocessing because for some reason R decides to import the age column as character rather than numeric data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">dp_injury_ages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb5-2">dp_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">age =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_number</span>(age)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">make_age_groups</span>() </span>
<span id="cb5-5"></span>
<span id="cb5-6">dp_injury_ages <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(description_id, age, age_group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(age_group, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0-17</td>
<td style="text-align: right;">405</td>
</tr>
<tr class="even">
<td style="text-align: left;">18-25</td>
<td style="text-align: right;">5718</td>
</tr>
<tr class="odd">
<td style="text-align: left;">26-35</td>
<td style="text-align: right;">6544</td>
</tr>
<tr class="even">
<td style="text-align: left;">36-45</td>
<td style="text-align: right;">3947</td>
</tr>
<tr class="odd">
<td style="text-align: left;">46+</td>
<td style="text-align: right;">3952</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">62</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="gender" class="level2">
<h2 class="anchored" data-anchor-id="gender">Gender</h2>
<p>Gender was assigned in the skeletons data on the basis of physical characteristics, whereas in HP and DP it was done on the basis of first names. In either case, it’s essentially probabilistic.</p>
<p>Values in the gender data across the collections haven’t been standardised and they’re all slightly different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">os_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, gender) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(gender) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  gender           n
  &lt;chr&gt;        &lt;int&gt;
1 F               81
2 M              198
3 Undetermined    55</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">hp_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, gender) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(gender)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  gender     n
  &lt;chr&gt;  &lt;int&gt;
1 f       4103
2 m      13425
3 u        167</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">dp_injury_bio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, gender) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(gender)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  gender     n
  &lt;chr&gt;  &lt;int&gt;
1 f       1712
2 m      17336
3 &lt;NA&gt;     111</code></pre>
</div>
</div>
<p>Annoying! But all the variations can be smoothed out with a simple function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">gender_std <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(df){</span>
<span id="cb12-2">  df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_lower</span>(gender)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb12-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gender =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_match</span>(</span>
<span id="cb12-5">      gender,</span>
<span id="cb12-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"f"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"female"</span>,</span>
<span id="cb12-7">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"m"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"male"</span>,</span>
<span id="cb12-8">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"undetermined"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>, </span>
<span id="cb12-9">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"u"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>,</span>
<span id="cb12-10">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>,</span>
<span id="cb12-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.default =</span> gender</span>
<span id="cb12-12">    ))</span>
<span id="cb12-13">}</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">gender</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">female</td>
<td style="text-align: right;">1712</td>
</tr>
<tr class="even">
<td style="text-align: left;">male</td>
<td style="text-align: right;">17336</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">111</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>Pie charts are a bit <a href="https://observablehq.com/blog/truth-about-pie-charts">controversial</a>. But I like them in certain cases. They’re also <a href="https://r-graph-gallery.com/piechart-ggplot2.html">really easy to make in {ggplot}</a>. Essentially, you start by making a bar chart and then turn it into a circle using the <code>coord_polar()</code> function.</p>
<section id="age-groups-1" class="level3">
<h3 class="anchored" data-anchor-id="age-groups-1">Age groups</h3>
<p>I opted to use a <a href="https://www.datawrapper.de/blog/which-color-scale-to-use-in-data-vis#sequential-color-scales-nbsp">sequential colour scale</a>, which I wouldn’t normally do for categorical data, but age groups are a special case (since they’re based on numerical data and do go from low to high).</p>
<p>I’d like to have consistent colours for these categories across analyses. With ggplot, the easiest way to have complete control of colours is to use the scale_*_manual() functions, with a paired vector. I can include all five groups (plus unknown) and ggplot won’t mind if some aren’t actually in the data; it’ll only complain if there’s a value in the data that isn’t included in the vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">col_age_groups5 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb13-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0-17"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#ffeda0'</span>, </span>
<span id="cb13-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"18-25"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#fecc5c'</span>, </span>
<span id="cb13-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"26-35"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#fd8d3c'</span>, </span>
<span id="cb13-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"36-45"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#fc4e2a'</span>, </span>
<span id="cb13-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"46+"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#800026'</span>, </span>
<span id="cb13-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#dddddd'</span></span>
<span id="cb13-8">  )</span></code></pre></div>
</div>
<p>As you might expect of data based on skeletons from cemeteries, the largest group is the oldest. (But the younger groups are nonetheless considerably larger than they would be in a modern cemetery.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">os_injury_ages <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">distinct</span>(person_id, age_group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(age_group <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(age_group) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">prop =</span> n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(n)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ypos =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cumsum</span>(prop)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>prop ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>prop, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>age_group)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show.legend =</span> F) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> age_group), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">position_stack</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># make it circular</span></span>
<span id="cb14-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_polar</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">direction =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> col_age_groups5) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.tag.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span> ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tag =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OS age groups"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/biographical/index_files/figure-html/os-age-pie-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Comparing the three collections, the 46+ group is a lot smaller in both HP and DP; in both cases, the age groups are more evenly distributed than in OS. In HP 46+ is clearly still the single largest group. In DP the largest group is 26-35, with 18-25 close behind, so pie chart critics might point out it’s not obvious which is larger. But I’d argue that’s fine, because the difference (about 3%) is too small to really matter. What I want to do is get a quick overview and comparison of the three collections, and that’s what this is good at.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/biographical/index_files/figure-html/all-age-pies-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gender-1" class="level3">
<h3 class="anchored" data-anchor-id="gender-1">Gender</h3>
<p>Only OS has a significant proportion of unknowns. What’s most noticeable is that women are in the minority in all three collections - this would be expected in criminal datasets, but is more surprising in the other two.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/biographical/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/biographical/</guid>
  <pubDate>Sun, 20 Apr 2025 23:00:00 GMT</pubDate>
</item>
<item>
  <title>A first look at the Skin and Bone data</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The brief for the meeting was mainly to think about</p>
<ul>
<li>characteristics of the three data collections</li>
<li>differences between the collections and what might be comparable</li>
<li>shared demographic data across collections - ie gender/sex and age - plus injury locations and types</li>
</ul>
<p>Note: this post uses final versions of data rather than the slightly provisional version at the time of the meeting, but that makes only a few very minor differences to results.</p>
</section>
<section id="osteological-data" class="level2">
<h2 class="anchored" data-anchor-id="osteological-data">Osteological data</h2>
<ul>
<li>fine-grained, systematically recorded data covering range of adult population</li>
<li>but only injuries (and other information) that can be observed on the skeleton itself</li>
<li>limited background data (eg, no precise dates)</li>
<li>age groups are very broad</li>
</ul>
<section id="skeletons-sex-and-injuries" class="level3">
<h3 class="anchored" data-anchor-id="skeletons-sex-and-injuries">Skeletons: sex and injuries</h3>
<p>I like waffle charts for comparisons, as long as there aren’t too many different values.</p>
<p>Having said that coverage is broad, gender is still not balanced (overall about 42% of skeletons for which sex could be determined [which is about 85% of skeletons]) so it’s not whole population - and highly variable between the three cemeteries.</p>
<p>There is a very consistent correlation between female sex and lower % of skeletons with injuries.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="skeletons-mapping-injuries" class="level3">
<h3 class="anchored" data-anchor-id="skeletons-mapping-injuries">Skeletons: mapping injuries</h3>
<p>It’s straightforward to assign broad body location regions across datasets for comparisons (less so for more detailed locations). But injury categories are much more diverse between datasets.</p>
<p>Skeletons are virtually all fractures, with a few variations on different parts of the body: knocks on the head, leg/arm/spinal muscle injuries.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="royal-london-hospital" class="level2">
<h2 class="anchored" data-anchor-id="royal-london-hospital">Royal London Hospital</h2>
<p>An early version of the data for all three hospitals was available, but I’d only done analysis of Royal London at this point as the most detailed dataset (shouldn’t assume it will be the same as other hospitals).</p>
<ul>
<li>unique data on length of hospital stay and outcomes</li>
<li>but hospital data only records injuries that were severe enough to necessitate hospitalisation</li>
<li>and descriptions only record the injuries that occasioned hospitalisation</li>
<li>no “uninjured” population for comparison</li>
</ul>
<section id="rlh-age-groups-and-injury-categories" class="level3">
<h3 class="anchored" data-anchor-id="rlh-age-groups-and-injury-categories">RLH: age groups and injury categories</h3>
<p>Used these particular age groups to match the groups in the skeletons data.</p>
<p>More diverse range of injuries than in skeletons; noted higher proprotion of burns among children and fractures among older patients.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="rlh-injury-locations-and-categories" class="level3">
<h3 class="anchored" data-anchor-id="rlh-injury-locations-and-categories">RLH: injury locations and categories</h3>
<p>Some interesting variations: knocks on the head again; fractures are mainly ribs, followed by arms and legs.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="rlh-outcomes-and-gender" class="level3">
<h3 class="anchored" data-anchor-id="rlh-outcomes-and-gender">RLH: outcomes and gender</h3>
<p>You can pack a lot of information into a mosaic chart - shows proportions of categories as well as of outcomes.</p>
<p>More detailed injury categories this time. “fracture+”= compound fractures - can see there’s a big difference in outcomes compared to simple fractures.</p>
<p>Compound fractures and burns were far more lethal than any other categories. Can also see association of female patients with burns and somewhat more likely than men to die, suggesting tended to be more severe cases.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="digital-panopticon" class="level2">
<h2 class="anchored" data-anchor-id="digital-panopticon">Digital Panopticon</h2>
<ul>
<li>may have highly detailed physical descriptions (and could even be repeated for the same individual over time)</li>
<li>considerable amounts of background and demographic information are available from the same sources or via DP linkage</li>
<li>prisoners and “habitual” convicts only</li>
</ul>
<section id="dp-chronology" class="level3">
<h3 class="anchored" data-anchor-id="dp-chronology">DP: chronology</h3>
<p>There are actually several different datasets within the DP collection, spanning more than a century. Chronologically there’s very little overlap between them (and I removed the few years’ overlap for convenience here).</p>
<p>There are huge differences in numbers, but also big differences in numbers (and also proportions) of datasets that included physical descriptions. That makes comparisons difficult.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dp-what-is-changing" class="level3">
<h3 class="anchored" data-anchor-id="dp-what-is-changing">DP: what is changing?</h3>
<p>Proportional bar chart shows changing percentage of descriptions that mention injuries more clearly. But it’s not actually recording changing likelihood of having injuries. It’s really showing increasing state surveillance of criminals’ bodies over the course of the nineteenth century.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="dp-gender" class="level3">
<h3 class="anchored" data-anchor-id="dp-gender">DP: gender</h3>
<p>Women are always substantially outnumbered in criminal data, but exact proportions can vary.</p>
<p>Comparison of injured vs uninjured, as with skeletons, shows lower % of women have injuries.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="comparison-location-of-injuries" class="level2">
<h2 class="anchored" data-anchor-id="comparison-location-of-injuries">Comparison: location of injuries</h2>
<p>What might be compared across the three collections?</p>
<p>Finish with comparison of body regions across DP, skeletons and RLH to show just how much difference there is.</p>
<p>DP - higher % head (skull, face). Closer inspection shows a lot of these are relatively superficial injuries that wouldn’t appear in the other two collections, like facial scars, missing teeth, scarred eyebrows.</p>
<p>RLH - predominance of broken legs</p>
<p>Skeletons - a lot more rib injuries (in fact this is aggregated per person and would be even higher if I counted every individual rib injury). Curious there are so few mentions in the other datasets.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/a-first-look/</guid>
  <pubDate>Sun, 13 Apr 2025 23:00:00 GMT</pubDate>
</item>
<item>
  <title>An overview of the Skin and Bone data</title>
  <dc:creator>Sharon Howard</dc:creator>
  <link>https://skin-and-bone-in-london-1760-1901.github.io/posts/introduction/</link>
  <description><![CDATA[ 




<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The Data</h2>
<p><a href="https://www.dhi.ac.uk/data/skin-and-bone">Download</a></p>
<p>Consists of six spreadsheets (.xlsx) listing the project data per collection, by person and by injury.</p>
<p>License: Creative Commons Attribution-ShareAlike 4.0 International (see the download page for citation details).</p>
</section>
<section id="methodology" class="level2">
<h2 class="anchored" data-anchor-id="methodology">Methodology</h2>
<p>The technical challenge is to extract and classify detailed evidence from more than 87000 descriptions of individuals, including physical characteristics, bodily infirmities and personal details. The language used to describe injuries in the data is highly varied across the datasets, and it can be difficult to classify and standardise the nature of injury.</p>
<p>The amount of processing required (and the amount and kind of information available) varies among the datasets. The osteological data is already highly structured, and the hospital data partly so. However, the physical descriptions in Digital Panopticon datasets often consist of undifferentiated and fragmentary language which can include various physical attributes (eg heights, scars, tattoos and disabilities).</p>
<p>The relevant descriptive language needs to be identified, delineated and classified, but the datasets are too large in most cases for it to be feasible to mark them up manually. Instead, the project builds on automated techniques developed for the <a href="https://www.digitalpanopticon.org/Tattoos,_1793-1925">Criminal Tattoos</a> project.</p>
<p>Outline of the process:</p>
<ul>
<li>tokenisation of the text (ie, break into individual linguistic units eg words, punctuation) and then classify each token using a dictionary prepared by the project team, to assign a type to each token: injury type, body part, body specifier (left, right, upper, back of), cause of injury [where possible], stop word (anything unrelated to an injury, such as boil, pockmark, or mole), separator.</li>
<li>a simple grammatical rule set is applied to the text in order to assign individual injuries to the correct locations on the body. The rules-based approach is augmented by training a <a href="https://spacy.io/">spaCy</a> relation extraction deep learning model.</li>
</ul>
<p>The process is not perfect. The original text of the descriptions is retained in the injuries tables for reference, and anyone using the data is advised to take some time to understand the data and its limitations.</p>
</section>
<section id="the-collections" class="level2">
<h2 class="anchored" data-anchor-id="the-collections">The collections</h2>
<section id="osteoarchaeological-data-os" class="level3">
<h3 class="anchored" data-anchor-id="osteoarchaeological-data-os">Osteoarchaeological data (OS)</h3>
<p>Data from three London burial grounds:</p>
<ul>
<li>St.&nbsp;Bride’s lower churchyard (1770-1849), c.300 individuals</li>
<li>Royal London Hospital (1825-1841), c.200 individuals</li>
<li>Payne Road/Bow Baptist (1816-1854), c.200 individuals</li>
</ul>
<p>Notes:</p>
<p>This is fine-grained, systematically recorded data covering a range of the adult population. It’s already very structured so it’s easy to work with. However, it includes a relatively limited range of injuries (mainly fractures), constrained to those that can be observed on the skeleton. There is also limited background information (we don’t know exactly when people were buried). Both age and sex are determined from the skeleton itself.</p>
</section>
<section id="hospital-records-hp" class="level3">
<h3 class="anchored" data-anchor-id="hospital-records-hp">Hospital Records (HP)</h3>
<p>Admission Registers:</p>
<ul>
<li>Middlesex (1760-64, 1771-88), c.6000 individuals</li>
<li>Royal London (1760, 1791, 1792, 1805), c.4000 individuals</li>
<li>Guy’s (1813-39), c.70000 individuals</li>
<li>St.&nbsp;Thomas’ (1773-6, 1781-9, 1790-9, 1800-9), c.30000 individuals</li>
</ul>
<p>Notes:</p>
<p>The registers vary considerably both in terms of their survival and the amount of detail they recorded. In the best cases, there is valuable data on length of hospital stay and outcomes, as well as ages and occupations. But the largest registers have much less detail than this. Moreover, by its nature the data only records injuries that were severe enough to necessitate hospitalisation (and descriptions only record the specific injuries that occasioned hospitalisation). There is no “uninjured” population for comparison.</p>
</section>
<section id="criminal-records-dp" class="level3">
<h3 class="anchored" data-anchor-id="criminal-records-dp">Criminal records (DP)</h3>
<p>Three datasets from the <a href="https://www.digitalpanopticon.org/">Digital Panopticon</a>:</p>
<ul>
<li>Millbank Prison Register (1816-1828), c.500 individuals</li>
<li>Home Office Prison Licenses (1853-1889), c.6000 individuals</li>
<li>Metropolitan Police Habitual Criminal Register (1881-1901), c.55,000 individuals</li>
</ul>
<p>Notes:</p>
<p>These can be extraordinarily detailed documents of bodily experience, all the more valuable because they have been linked to extensive biographical and criminal histories. But, as noted, the varied language of the descriptions is highly challenging for computational analysis and there will be many (though hopefully mostly minor) errors and omissions in classification, so the data should be used with care.</p>
</section>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>On the Digital Panopticon descriptions and a similar methodology see <a href="https://www.digitalpanopticon.org/Tattoos,_1793-1925">Tattoos</a>.</p>
<p>The Hospital and Osteological data sources are described in detail in Madeleine Mant’s PhD thesis, <a href="https://macsphere.mcmaster.ca/handle/11375/20026">Slips, Trips, Falls, and Brawls: Fractures of the Working Poor in London During the Long Eighteenth Century</a>.</p>


</section>

 ]]></description>
  <guid>https://skin-and-bone-in-london-1760-1901.github.io/posts/introduction/</guid>
  <pubDate>Sun, 06 Apr 2025 23:00:00 GMT</pubDate>
</item>
</channel>
</rss>
